# MyPillBox
![MyPillBoxTitle2](https://github.com/user-attachments/assets/801c3e25-1193-42f5-a7f2-c9a9f5f0f322)
MyPillBoxは、星評価機能やグラフ表示機能、ログ機能などで自分に合う処方薬が見つけられるお薬管理Webアプリです。<br>
レスポンシブ対応しておりますので、スマホからもご利用可能です。また、英語にも対応しております。ブラウザの言語設定を英語にすると、英語版がご利用いただけます。<br>
▼URLはこちら▼ https://mypillbox-d648eb00e786.herokuapp.com<br>
サンプルデータが入ったアカウントは以下となります(お薬データと、2025年1月分の日々の記録データが入っています)。<br>
メールアドレス：erika@example.com パスワード：123456
# 開発理由
私自身、通院を開始してから数年経ちますが、自分に合う処方薬を見つけることは難しいものでした。<br>
今まではiPhone純正のヘルスケアアプリで日々の服薬を管理していましたが、服薬量のグラフは表示されるものの、お薬が合う/合わないという評価がつけられず、また服薬量と気分や体調のグラフの連携ができず、合う薬が見つけにくい状態でした。<br>
そこで、それらの不満を解消し、私だけでなく他の通院している知人にも役立つWebアプリがあればいいなと思い、開発を志しました。
# 使用技術
- フロントエンド
  - HTML
  - CSS
  - Bootstrap 5.3.0
  - JavaScript
  - Chart.js 4.4.1
- バックエンド
  - Python 3.12
  - Flask 3.0.3
  - WTForms 3.1.2
  - データベース
    - Flask-SQLAlchemy(SQLAlchemyのORM機能を使用) 3.1.1
# 開発環境
- Python 3.12
- データベース
  - SQLite(開発時)
  - Heroku Postgres(デプロイ時)
- インフラ
  - Heroku
# 開発期間
約3ヵ月
# 機能一覧
- ログイン機能
- ログアウト機能
- ユーザー情報変更機能
  - ユーザー名の変更
  - アカウント削除
- お薬管理機能
  - お薬情報の登録・更新・削除
  - 服用中のお薬と服用中でないお薬の一覧表示
  - お薬の一覧表示で登録順または星評価順で並び替え
  - お薬詳細画面にて日々の記録で記録した月ごとの服用量・気分・体調をグラフ表示
  - お薬を削除するとそれに関連づいた日々の記録明細のお薬データも削除される
  - ユーザーを削除するとそれに関連づいたお薬も削除される
  - お薬を削除すると日々の記録データからそのお薬が削除される
- 日々の記録機能
  - 特定の日の気分・体調を星評価で記録、また服用中のお薬の飲んだ量を記録できる
  - 日々の記録情報の登録・更新・削除
  - 日々の記録画面から日々の記録を日付順(降順)で一覧・ページネーションで表示
  - ユーザーを削除するとそれに関連づいた日々の記録も削除される
# 設計書
ポートフォリオの作成にあたり、要件定義・画面設計・テーブル定義書などを作成しております。<br/>
[こちらのリンクから、ご覧いただけます。](https://github.com/Erika0701momo/MyPillBox/tree/master/docs)
# 工夫したところ
## 使いやすさ
お薬という題材にふさわしいような落ち着いた配色、また使いやすいUIを心掛けました。上部にナビゲーションバーを設置し、ホーム・お薬管理・日々の記録というシンプルな作りにしました。以下の画像はホーム画面です。
![ホーム画面](https://github.com/user-attachments/assets/9836dc56-307e-49eb-9518-512bb61535de)
## 見やすさ、お薬並び替え
お薬管理のお薬一覧表示で、星評価を一目で分かるように表示いたしました。また、お薬を登録順または星評価順で並び替えられるようにし、お薬を飲み始めた順番や評価が高いお薬を把握できるようにしました。
![mypillbox-d648eb00e786 herokuapp com_meds__active_sort=ratingorder not_active_sort=registerorder](https://github.com/user-attachments/assets/703bad45-b437-4768-a28c-ce07a8a51b82)
## グラフ表示
各お薬の詳細画面で、日々の記録データを使った月ごとの気分・体調・服用量のグラフを設置し、服用量によって気分や体調が変動しているのか、服用量がどのような影響を及ぼしているのか一目で分かるようにしました。
![mypillbox-d648eb00e786 herokuapp com_meds_1_month=2025-01](https://github.com/user-attachments/assets/7e614609-e287-4c23-9005-a88aea7af07d)
## ページネーション
日々の記録画面の日々の記録一覧表示で、flask-paginateを使用し、記録一覧にアクセスしやすくしました。
![mypillbox-d648eb00e786 herokuapp com_logs_](https://github.com/user-attachments/assets/66b78912-8d0d-4f1b-b10a-6a88c99661b5)
## お薬、日々の記録の気分と体調の星評価
物事を評価する際一般的に広く使われている星評価を使用することで、お薬と日々の記録の気分と体調の評価をユーザーにとって直感的に分かりやすく評価できるようにしました。実装にはJavaScriptを使用しました。
以下の画像は日々の記録の登録画面です。
![mypillbox-d648eb00e786 herokuapp com_logs_create](https://github.com/user-attachments/assets/dc21c9b7-b7a9-48ef-af7a-1ad5fe4767cf)
## 英語版対応
もともと英語が好きで英語話者の友人がおり、その人にも使ってもらいたいという思いから英語版にも対応しました。また、英語で書かれたFlaskのチュートリアル本で学習したのですが、その本が大変為になり、やはり英語圏の情報が充実しているということや、できることならグローバルに使ってもらえるものを作りたいと思ったのも英語版に対応したきっかけです。英語への翻訳にはChatGPTを活用しました。
# 苦労したところ
### WTForms
Pythonでフォームを簡単に作成し、バリデーションを行うためのライブラリとしてWTFormsがあります。HTMLフォームをPythonのクラスとして定義し、フォームデータのバリデーションやレンダリングを効率化できるというものです。<br>
WTFormsを使用する際、バリデーションのカスタマイズや複雑なフォーム構造の実装に苦労しました。特に、日々の記録登録と編集でデータベースから取得した服用中のお薬情報などをフォームに初期表示させるのが難しかったです。<br>
FieldListとFormFieldの扱いや、カスタムバリデーションの実装には試行錯誤が必要でした。
### レイアウト
CSSが苦手なため、レイアウト崩れへの対処にも苦労しました。なかなか思うようなレイアウトにならないことがあり、Web検索やChatGPTへの質問に時間を費やしました。
### 英語版対応
英語版対応で苦労したところは、日本語だとお薬の単位(錠など)に複数形はありませんが、英語だと例えば1日に服用するお薬の量が1以上だと、2tabletsなど複数形になるということです。<br>
helpers.pyというモジュールで日本語版だと単位はそのまま、英語版だと単位を服用量などによって複数形または単数形にする関数を作り、対処しました。
# 支援とリソース
詰まってしまった時は、就労移行支援事業所のプログラミング講師の方々とデザイン講師の方に助言を求めました。また、ChatGPTも活用しました。
