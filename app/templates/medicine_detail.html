{% extends "base.html" %}
{% block content %}
  <h2 class="mb-4">お薬管理</h2>
  <div class="row">
    <div class="col-12 col-lg-7 mb-3">
      <p>ここにグラフを表示</p>
    </div>
  </div>
  <div class="row">
    <div class="col-12 col-lg-7 mb-3">
      <div class="mb-1 d-flex justify-content-between align-items-center">
        <h5 class="mb-0">お薬の情報</h5>
        <div>
          <a href="{{ url_for('index') }}" class="btn btn-custom btn-sm">お薬を編集</a>
          <a href="{{ url_for('index') }}" class="btn btn-danger btn-sm">お薬を削除</a>
        </div>
      </div>
      <table class="table table-hover">
        <tr>
          <td>お薬の名前</td>
          <td>{{ medicine.name }}</td>
        </tr>
        <tr>
          <td>服用開始日</td>
          <td>{{ medicine.taking_start_date }}</td>
        </tr>
        <tr>
          <td>1日に服用する量</td>
          <td>
            {% if not medicine.dose_per_day %}
              0
            {% elif medicine.dose_per_day.split(".")[1] == 0 %}
              {{ medicine.dose_per_day|int }}
            {% else %}
              {{ medicine.dose_per_day }}
            {% endif %}
            {{ medicine.taking_unit.value }}
          </td>
        </tr>
        <tr>
          <td class="text-nowrap">服用するタイミング</td>
          <td>{{ medicine.taking_timing }}</td>
        </tr>
        <tr>
          <td>診察メモ</td>
          <td>{{ medicine.memo }}</td>
        </tr>
        <tr>
          <td>お薬の評価</td>
          <td>
            {% for i in range(0, medicine.rating) %}
              <img src="{{ url_for('static', filename='images/star_on.png') }}"
                   class="star-display rating-checked"
                   alt="star">
            {% endfor %}
            {% if medicine.rating < 5 %}
              {% for i in range(medicine.rating, 5) %}
                <img src="{{ url_for('static', filename='images/star_on.png') }}"
                     class="star-display"
                     alt="star">
              {% endfor %}
            {% endif %}
          </td>
        </tr>
        <tr>
          <td>ステータス</td>
          <td>
            {% if medicine.is_active == True %}
              服用中
            {% else %}
              服用していない
            {% endif %}
          </td>
        </tr>
      </table>
    </div>
  </div>
{% endblock content %}
